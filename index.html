<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>特色代幣排行榜</title>
    <style>
        body {
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background: #fafbfc;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        #bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
            background: url('2.jpg') center center / cover no-repeat;
        }
        #bg-mask {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            pointer-events: none;
            background: rgba(255,255,255,0.75);
        }
        #main-content, .container, #chat-widget, #review-btn, #review-modal {
            position: relative;
            z-index: 2;
        }
        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .title {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .subtitle {
            color: #888;
            margin-bottom: 32px;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }
        .token-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            padding: 20px 18px 18px 18px;
            display: flex;
            flex-direction: row;
            align-items: center;
            cursor: pointer;
            border: none;
            transition: box-shadow 0.2s;
        }
        .token-card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }
        .token-img {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: #eee;
            margin-right: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #bbb;
        }
        .token-info {
            flex: 1;
        }
        .token-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .token-meta {
            font-size: 0.95rem;
            color: #888;
            margin-bottom: 8px;
        }
        .token-value {
            color: #ff6600;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .token-bar {
            height: 6px;
            background: #f3f3f3;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        .token-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, #ff6600 60%, #ffd580 100%);
            border-radius: 3px;
        }
        @media (max-width: 600px) {
            .card-grid {
                grid-template-columns: 1fr;
            }
        }
        #chat-widget {
            position: fixed;
            left: 0;
            top: 0;
            width: 220px;
            height: 100vh;
            right: auto;
            bottom: auto;
            background: rgba(255, 249, 196, 0.75);
            border-radius: 0 16px 16px 0;
            box-shadow: 4px 0 24px #ffe06655;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            backdrop-filter: blur(8px);
            font-family: inherit;
            border: 0.5px solid #FFE066;
        }
        #chat-messages {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
            font-size: 1rem;
            color: #bfa800;
            background: rgba(255, 253, 230, 0.5);
            word-break: break-all;
            white-space: pre-wrap;
        }
        #chat-form {
            display: flex;
            border-top: 1.5px solid #FFE066;
            background: rgba(255, 249, 196, 0.5);
            align-items: center;
        }
        #chat-input {
            flex: 1;
            min-width: 0;
            border: none;
            outline: none;
            padding: 8px 6px;
            font-size: 0.95rem;
            background: transparent;
            color: #bfa800;
        }
        #chat-form button {
            min-width: 48px;
            max-width: 60px;
            font-size: 0.95rem;
            padding: 0 8px;
            box-sizing: border-box;
            white-space: nowrap;
        }
        #review-btn {
            position: fixed;
            top: 50%;
            right: 32px;
            transform: translateY(-50%);
            z-index: 10001;
            background: #ffe066;
            color: #bfa800;
            border: none;
            border-radius: 16px;
            padding: 16px 28px;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 4px 16px #ffe06655;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        #review-btn:hover {
            background: #fffbe6;
            color: #ff8000;
        }
        #review-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.18);
            backdrop-filter: blur(2px);
            z-index: 20000;
            align-items: center;
            justify-content: center;
        }
        #review-content {
            background: #fffbe6;
            border-radius: 24px;
            box-shadow: 0 4px 32px #ffe06699;
            width: 600px;
            max-width: 96vw;
            max-height: 80vh;
            padding: 32px 24px 24px 24px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }
        #review-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: #ffe066;
            color: #bfa800;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: 0 1px 4px #ffe06655;
        }
        .review-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 8px #ffe06655;
            padding: 18px 16px;
            margin-bottom: 18px;
            width: 100%;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 18px;
        }
        .review-card-img {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #bbb;
            overflow: hidden;
        }
        .review-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }
        .review-card-info {
            flex: 1;
        }
        .review-card-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 4px;
            color: #bfa800;
        }
        .review-card-desc {
            font-size: 0.98rem;
            color: #888;
            margin-bottom: 6px;
        }
        .review-card-twitter {
            font-size: 0.95rem;
            color: #1da1f2;
            text-decoration: underline;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div id="bg-overlay"></div>
    <div id="bg-mask"></div>
    <div class="container">
        <div class="title">CSKOL 代幣</div>
        <div class="subtitle">目前最熱門的 CSkol 代幣，備受關注。</div>
        <div class="main-card" style="position:relative;display:flex;justify-content:center;margin-top:24px;margin-bottom:16px;z-index:2;">
          <div class="token-card main-card-inner" style="width:420px;height:140px;box-shadow:0 6px 24px #ffe066cc;font-size:1.25rem;transform:scale(1.12);">
            <div class="token-img" style="width:90px;height:90px;margin-right:24px;"><img src="logo.png" alt="Main" style="width:100%;height:100%;border-radius:16px;"></div>
            <div class="token-info">
              <div class="token-title" style="font-size:1.6rem;">CSKOL 王者</div>
              <div class="token-meta" id="main-ca">CA: 0x1f8aef369ef5b4f95b4a299417dce5ec55474444</div>
              <div class="token-value" id="main-market">市值：--</div>
              <div class="token-bar"><div class="token-bar-inner" id="main-bar" style="width: 0%"></div></div>
            </div>
          </div>
        </div>
        <div class="card-grid">
            <button class="token-card" data-ca="0x38d93b55b82f50b484c6b194852f890ccdda4444">
                <div class="token-img"><img src="1.jpg" alt="UHC" style="width:100%;height:100%;border-radius:12px;"></div>
                <div class="token-info">
                    <div class="token-title">CSnainiu</div>
                    <div class="token-meta">CA: </div>
                    <div class="token-value">尚未認領</div>
                    <div class="token-bar"><div class="token-bar-inner" style="width: 0%"></div></div>
                </div>
            </button>
            <button class="token-card" data-ca="soon">
                <div class="token-img"><img src="22.jpg" alt="ghoul" style="width:100%;height:100%;border-radius:12px;"></div>
                <div class="token-info">
                    <div class="token-title">CSbaolingdeng</div>
                    <div class="token-meta">CA: 尚未認領</div>
                    <div class="token-value">尚未認領</div>
                    <div class="token-bar"><div class="token-bar-inner" style="width: 0%"></div></div>
                </div>
            </button>
            <button class="token-card" data-ca="soon">
                <div class="token-img"><img src="3.jpg" alt="dwildo" style="width:100%;height:100%;border-radius:12px;"></div>
                <div class="token-info">
                    <div class="token-title">CSfacairiji</div>
                    <div class="token-meta">CA: 尚未認領</div>
                    <div class="token-value">尚未認領</div>
                    <div class="token-bar"><div class="token-bar-inner" style="width: 0%"></div></div>
                </div>
            </button>
            <button class="token-card" data-ca="soon">
                <div class="token-img"><img src="4.jpg" alt="XPeople" style="width:100%;height:100%;border-radius:12px;"></div>
                <div class="token-info">
                    <div class="token-title">CSjingouwajueji</div>
                    <div class="token-meta">CA: 尚未認領</div>
                    <div class="token-value">尚未認領</div>
                    <div class="token-bar"><div class="token-bar-inner" style="width: 0%"></div></div>
                </div>
            </button>
            <button class="token-card" data-ca="soon">
                <div class="token-img"><img src="5.jpg" alt="Kisses" style="width:100%;height:100%;border-radius:12px;"></div>
                <div class="token-info">
                    <div class="token-title">CSWickli</div>
                    <div class="token-meta">CA: 尚未認領</div>
                    <div class="token-value">尚未認領</div>
                    <div class="token-bar"><div class="token-bar-inner" style="width: 0%"></div></div>
                </div>
            </button>
            <button class="token-card" data-ca="soon">
                <div class="token-img"><img src="6.jpg" alt="NewToken" style="width:100%;height:100%;border-radius:12px;"></div>
                <div class="token-info">
                    <div class="token-title">CSenheng</div>
                    <div class="token-meta">CA: 尚未認領</div>
                    <div class="token-value">尚未認領</div>
                    <div class="token-bar"><div class="token-bar-inner" style="width: 0%"></div></div>
                </div>
            </button>
            <button class="token-card" id="add-card-btn" style="font-size:3.5rem;justify-content:center;align-items:center;" type="button">
                <span style="font-size:4rem;color:#ff8000;">+</span>
            </button>
        </div>
    </div>
    <!-- 弹窗 -->
    <div id="popup-modal" style="display:none;position:fixed;z-index:1000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
        <div id="popup-content" style="background:#fff;border-radius:22px;box-shadow:0 4px 24px rgba(0,0,0,0.18);width:340px;max-width:90vw;padding:28px 18px 24px 18px;position:relative;display:flex;flex-direction:column;align-items:center;">
            <button id="popup-close" style="position:absolute;top:12px;right:12px;background:#ff8000;color:#fff;border:none;border-radius:50%;width:36px;height:36px;font-size:1.3rem;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,0.08);">關閉</button>
            <div id="popup-img" style="margin-top:8px;margin-bottom:18px;"></div>
            <div id="popup-title" style="font-size:2rem;font-weight:600;margin-bottom:8px;">伊拉克</div>
            <div id="popup-desc" style="color:#444;font-size:1.08rem;margin-bottom:22px;text-align:center;">此代幣是 CSKOL.fun 代幣生態系統的一部分。</div>
            <button style="width:90%;padding:10px 0;border-radius:12px;border:none;background:#ff8000;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;">生成代幣</button>
        </div>
    </div>
    <!-- 二级弹窗 -->
    <div id="token-modal" style="display:none;position:fixed;z-index:2000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
        <div id="token-content" style="background:#f7f7f7;border-radius:24px;box-shadow:0 4px 24px rgba(0,0,0,0.18);width:520px;max-width:98vw;padding:32px 28px 32px 28px;position:relative;display:flex;flex-direction:column;align-items:center;">
            <button id="token-close" style="position:absolute;top:18px;right:18px;background:#ff8000;color:#fff;border:none;border-radius:50%;width:44px;height:44px;font-size:1.5rem;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,0.08);">X</button>
            <div style="display:flex;align-items:center;width:100%;margin-bottom:18px;">
                <img src="logo.png" alt="logo" style="width:48px;height:48px;border-radius:12px;background:#fff;margin-right:12px;">
                <span style="font-size:2rem;font-weight:700;color:#222;">生成令牌</span>
            </div>
            <div style="color:#222;font-size:1.08rem;margin-bottom:18px;text-align:left;width:100%;">
                您似乎已準備好創建新的 kol 代幣並擔任其認領者的角色。但請記住，擔任認領者伴隨著重大責任。品牌、治理、人員、行銷……所有這一切。如果你真的確定，那就展示你的實力。
            </div>
            <div style="background:#222;border-radius:20px;width:90%;max-width:400px;margin:0 auto 18px auto;padding:24px 0;display:flex;flex-direction:column;align-items:center;">
                <div id="token-img" style="margin-bottom:12px;"></div>
                <div id="token-name" style="font-size:1.3rem;font-weight:600;color:#ff8000;"></div>
            </div>
            <div style="width:100%;margin-bottom:12px;">
                <div style="font-weight:700;font-size:1.1rem;margin-bottom:4px;">在 Four.meme 上部署</div>
                <div style="color:#222;font-size:1rem;margin-bottom:8px;">要認領令牌並完全控制此 kol，請啟動一個新的 token 並將其命名為 <b>tokenName</b>。您可以選擇任何您喜歡的符號。對於 website 欄位，請使用 <span style='color:#ff8000;font-weight:600;'>https://tinyurl.com/4aw62494</span>。我們還建議添加一個 X 社群來幫助您領導您的團隊。</div>
                <div style="background:#ff8000;color:#fff;padding:8px 12px;border-radius:8px;font-size:0.98rem;margin-bottom:8px;">
                    <b>注意：</b>如果您的代幣在 30 分鐘內沒有達到 30K 市值和 30 參與者，您的代幣將被永久刪除，以便另一位認領者可以使用新代幣獲得領導地位。您將被記住為過期的認領者。
                </div>
                <div style="color:#222;font-size:0.98rem;">您一次只能管理一個代幣。但即使您作為認領者失敗了，也不用擔心，您隨時可以重新開始新的 kol 代幣。</div>
            </div>
            <div style="width:100%;display:flex;justify-content:flex-end;gap:16px;">
                <button style="padding:10px 22px;border-radius:12px;border:2px solid #222;background:#fff;font-size:1.1rem;font-weight:500;cursor:pointer;">如何使用？</button>
                <button style="padding:10px 22px;border-radius:12px;border:none;background:#ff8000;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;">立即部署！</button>
            </div>
        </div>
    </div>
    <!-- 进入网站欢迎弹窗 -->
    <div id="welcome-modal" style="display:flex;position:fixed;z-index:3000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
        <div id="welcome-content" style="background:#ededed;border-radius:28px;box-shadow:0 4px 32px rgba(0,0,0,0.18);width:600px;max-width:98vw;padding:32px 32px 24px 32px;position:relative;display:flex;flex-direction:column;align-items:center;">
            <button id="welcome-close" style="position:absolute;top:18px;right:18px;background:#ff8000;color:#fff;border:none;border-radius:50%;width:44px;height:44px;font-size:1.5rem;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,0.08);">關閉</button>
            <div style="display:flex;align-items:center;width:100%;margin-bottom:18px;">
                <img src="logo.png" alt="logo" style="width:54px;height:54px;border-radius:14px;background:#fff;margin-right:14px;">
                <span style="font-size:2.2rem;font-weight:700;color:#222;">歡迎來到 CSKOL.fun！</span>
            </div>
            <div style="width:100%;border-radius:20px;overflow:hidden;margin-bottom:18px;position:relative;">
                <img src="2.png" alt="map" style="width:100%;height:120px;object-fit:cover;background:#222;display:block;">
                <div style="position:absolute;left:50%;top:110px;transform:translateX(-50%);background:#ff8000;border-radius:16px;padding:8px 18px;box-shadow:0 2px 8px rgba(0,0,0,0.10);font-size:1.3rem;font-weight:700;color:#fff;">CSKOL</div>
            </div>
            <div style="color:#222;font-size:1.08rem;margin-bottom:18px;text-align:left;width:100%;">
                每個 memecoin 圈子裡都有自己的 CSkol！無論您是想成為認領者還是投資 CSkol 代幣，這都是一場全面的 CSkol 大戰！
            </div>
            <div style="width:100%;margin-bottom:10px;font-size:1.15rem;font-weight:700;">購買 $CSKOL 代幣</div>
            <div style="width:100%;display:flex;align-items:center;background:#ff8000;border-radius:12px;padding:8px 12px 8px 8px;margin-bottom:14px;">
                <img src="logo.png" alt="logo" style="width:32px;height:32px;border-radius:8px;background:#fff;margin-right:10px;">
                <span style="font-size:1.05rem;color:#fff;font-family:monospace;overflow-x:auto;">即將上線</span>
                <span id="welcome-copy" style="margin-left:auto;background:#222;color:#ff8000;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;cursor:pointer;">⧉</span>
            </div>
            <div style="color:#222;font-size:1rem;margin-bottom:10px;text-align:left;width:100%;">
                想了解購買平台官方和主要代幣 $CSKOL 的好處，請點擊 $CSKOL 標籤。
            </div>
            <div style="background:#fff3e0;color:#d35400;padding:10px 14px;border-radius:8px;font-size:0.98rem;margin-bottom:10px;width:100%;">
                <b>注意：</b>本平台上的 CSkol 代幣與現實世界的推特博主無關，純粹為娛樂目的而創建。請記住，每個代幣都是由像您一樣的其他訪客創建的，因此請始終負責任地投資。
            </div>
            <div style="color:#222;font-size:0.98rem;margin-bottom:18px;width:100%;">要完全了解 CSKOL.fun 的運作方式、創建新的 CSkol 代幣以及接管現有的 CSkol 代幣，請點擊「指南」部分並探索您需要了解的所有內容。</div>
            <div style="width:100%;display:flex;justify-content:space-between;gap:16px;">
                <button id="welcome-cskol" style="flex:1;padding:10px 0;border-radius:12px;border:2px solid #222;background:#fff;font-size:1.1rem;font-weight:500;cursor:pointer;margin-right:8px;">$CSKOL</button>
                <button id="welcome-help" style="flex:1;padding:10px 0;border-radius:12px;border:2px solid #222;background:#fff;font-size:1.1rem;font-weight:500;cursor:pointer;margin-right:8px;">如何使用？</button>
                <button id="welcome-agree" style="flex:1;padding:10px 0;border-radius:12px;border:none;background:#ff8000;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;">我同意</button>
            </div>
            <div style="width:100%;text-align:center;color:#888;font-size:0.98rem;margin-top:18px;">由 BNB 提供支持。</div>
        </div>
    </div>
    <!-- 如何使用弹窗 -->
    <div id="howto-modal" style="display:none;position:fixed;z-index:3500;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
        <div id="howto-content" style="background:#ededed;border-radius:28px;box-shadow:0 4px 32px rgba(0,0,0,0.18);width:700px;max-width:98vw;padding:32px 32px 24px 32px;position:relative;display:flex;flex-direction:column;align-items:center;">
            <button id="howto-close" style="position:absolute;top:18px;right:18px;background:#ff8000;color:#fff;border:none;border-radius:50%;width:44px;height:44px;font-size:1.5rem;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,0.08);">X</button>
            <div style="display:flex;align-items:center;width:100%;margin-bottom:18px;">
                <img src="logo.png" alt="logo" style="width:54px;height:54px;border-radius:14px;background:#fff;margin-right:14px;">
                <span style="font-size:2.2rem;font-weight:700;color:#222;">如何使用 CSKOL.fun？</span>
            </div>
            <div style="color:#222;font-size:1.13rem;margin-bottom:18px;text-align:left;width:100%;">
                使用 CSKOL.fun 平台非常簡單。如果您是一位技術嫻熟且敬業的開發人員，您可以創建一個新的 CSkol 代幣，認領一個模擬 kol，建立社群，並將您的代幣帶入全面的 CSkol 大戰。<br><br>
                如果您是投資者，您可以加入並管理運營良好的 kol 代幣，持有其資產，並參與全球活動和投資機會。
            </div>
            <div style="width:100%;border-radius:20px;overflow:hidden;margin-bottom:18px;position:relative;">
                <img src="2.png" alt="map" style="width:100%;height:180px;object-fit:cover;background:#222;display:block;">
            </div>
            <div style="color:#222;font-size:1.08rem;margin-bottom:18px;text-align:left;width:100%;">
                如果您是開發人員，您只需點擊一個尚未被認領或正在等待認領者的 kol，然後點擊「生成令牌」按鈕。然後，按照資訊頁面的說明在 Four.meme 上啟動新令牌。<br><br>
                例如，要為中國創建 CSkol 代幣，只需在 Four.meme 上啟動一個令牌，令牌名稱為 CS+kol 名稱，網站名稱為 https://tinyurl.com/4aw62494。<b>就是這樣，您現在是某個 CSkol 的認領者了！</b>
            </div>
            
            <div style="width:100%;text-align:center;color:#888;font-size:0.98rem;margin-top:18px;">由 BNB 提供支持。</div>
        </div>
    </div>
    <!-- 新增卡片弹窗 -->
    <div id="add-card-modal" style="display:none;position:fixed;z-index:4000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);backdrop-filter:blur(2px);align-items:center;justify-content:center;">
        <div id="add-card-content" style="background:#fff;border-radius:22px;box-shadow:0 4px 24px rgba(0,0,0,0.18);width:350px;max-width:95vw;padding:32px 24px 24px 24px;position:relative;display:flex;flex-direction:column;align-items:center;">
            <button id="add-card-close" style="position:absolute;top:12px;right:12px;background:#ff8000;color:#fff;border:none;border-radius:50%;width:36px;height:36px;font-size:1.3rem;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,0.08);">X</button>
            <div style="font-size:1.4rem;font-weight:600;margin-bottom:18px;">新增 KOL</div>
            <form id="add-card-form" style="width:100%;display:flex;flex-direction:column;align-items:center;gap:16px;">
                <label style="width:100%;text-align:left;font-size:1rem;">名稱
                    <input type="text" id="add-name" placeholder="請輸入KOL名稱" style="width:100%;padding:6px 8px;border-radius:8px;border:1px solid #ccc;margin-top:6px;">
                </label>
                <label style="width:100%;text-align:left;font-size:1rem;">推特連結
                    <input type="text" id="add-twitter" placeholder="https://twitter.com/xxx" style="width:100%;padding:6px 8px;border-radius:8px;border:1px solid #ccc;margin-top:6px;">
                </label>
                <label style="width:100%;text-align:left;font-size:1rem;">主要事蹟
                    <textarea id="add-desc" rows="3" placeholder="請輸入主要事蹟" style="width:100%;padding:6px 8px;border-radius:8px;border:1px solid #ccc;margin-top:6px;"></textarea>
                </label>
                <button id="add-card-submit" type="submit" style="width:100%;padding:10px 0;border-radius:12px;border:none;background:#ff8000;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;z-index:9999;" tabindex="0">確定</button>
            </form>
            <div id="add-card-wait" style="display:none;font-size:1.2rem;color:#ff8000;margin-top:18px;">正在提交...</div>
        </div>
    </div>
    <div id="chat-widget">
      <div id="chat-messages"></div>
      <form id="chat-form" onsubmit="return false;">
        <input id="chat-input" type="text" placeholder="输入消息..." autocomplete="off" />
        <button id="chat-send-btn" type="button">发送</button>
      </form>
    </div>
    <button id="review-btn">審核查詢</button>
    <div id="review-modal">
      <div id="review-content">
        <button id="review-close">關閉</button>
        <div id="review-list"></div>
      </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script>
    // 自动获取并渲染卡片代币信息
    async function updateTokenCards() {
        const cards = document.querySelectorAll('.token-card');
        for (const card of cards) {
            const ca = card.getAttribute('data-ca');
            if (!ca) continue;
            // 缩写CA
            let caShort = ca;
            if (/^0x[a-fA-F0-9]{40}$/.test(ca)) {
                caShort = ca.slice(0, 6) + '...' + ca.slice(-4);
            }
            // 渲染CA缩写
            let meta = card.querySelector('.token-meta');
            if (meta) meta.innerText = 'CA: ' + caShort;
            try {
                const res = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${ca}`);
                const data = await res.json();
                if (data && data.pairs && data.pairs[0]) {
                    const info = data.pairs[0].baseToken;
                    // 名称
                    card.querySelector('.token-title').innerText = info.name || info.symbol || 'Unknown';
                    // logo
                    if (info.logoURI) {
                        card.querySelector('.token-img').innerHTML = `<img src="${info.logoURI}" alt="logo" style="width:100%;height:100%;border-radius:12px;">`;
                    }
                    // 市值
                    const fdv = data.pairs[0].fdv;
                    if (fdv) {
                        card.querySelector('.token-value').innerText = `Market Cap: $${(fdv/1000).toFixed(1)}K`;
                    }
                }
            } catch (e) {
                // 可选：显示加载失败
            }
        }
    }
    updateTokenCards();
    setInterval(updateTokenCards, 10000); // 每10秒自动刷新一次市值
    // 监听所有卡片按钮
    document.querySelectorAll('.token-card').forEach(btn => {
        btn.addEventListener('click', function() {
            const ca = btn.getAttribute('data-ca');
            // 如果是有效CA，直接跳转
            if (/^0x[a-fA-F0-9]{40}$/.test(ca)) {
                window.open('https://four.meme/token/' + ca, '_blank');
                return;
            }
            // 获取卡片上的代币名字
            var tokenName = btn.querySelector('.token-title').innerText;
            document.getElementById('popup-title').innerText = tokenName;
            // 获取卡片头像
            var imgDiv = btn.querySelector('.token-img');
            var imgTag = imgDiv.querySelector('img');
            var popupImgHtml = '';
            if(imgTag) {
                popupImgHtml = '<img src="'+imgTag.src+'" alt="logo" style="width:90px;height:90px;border-radius:18px;background:#fff;">';
            } else {
                popupImgHtml = '<div style="width:90px;height:90px;border-radius:18px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:3rem;color:#ff8000;font-weight:700;">'+imgDiv.textContent.trim().charAt(0)+'</div>';
            }
            document.getElementById('popup-img').innerHTML = popupImgHtml;
            // 存储到window，供生成令牌弹窗用
            window._currentToken = {
                name: tokenName,
                imgHtml: popupImgHtml
            };
            document.getElementById('popup-modal').style.display = 'flex';
        });
    });
    // 关闭弹窗
    document.getElementById('popup-close').onclick = function() {
        document.getElementById('popup-modal').style.display = 'none';
    };
    // 点击遮罩关闭弹窗（可选）
    document.getElementById('popup-modal').addEventListener('click', function(e) {
        if (e.target === this) this.style.display = 'none';
    });
    // 监听生成令牌按钮
    document.querySelector('#popup-content button:last-child').onclick = function() {
        var token = window._currentToken || {name:'',imgHtml:''};
        document.getElementById('token-name').innerText = token.name;
        document.getElementById('token-img').innerHTML = token.imgHtml;
        document.getElementById('token-modal').style.display = 'flex';
    };
    // 关闭二级弹窗
    document.getElementById('token-close').onclick = function() {
        document.getElementById('token-modal').style.display = 'none';
    };
    // 点击遮罩关闭二级弹窗
    document.getElementById('token-modal').addEventListener('click', function(e) {
        if (e.target === this) this.style.display = 'none';
    });
    // 监听立即部署按钮
    document.querySelector('#token-content button:last-child').onclick = function() {
        window.open('https://four.meme/zh-TW', '_blank');
    };
    // 欢迎弹窗关闭
    document.getElementById('welcome-close').onclick = function() {
        document.getElementById('welcome-modal').style.display = 'none';
    };
    document.getElementById('welcome-agree').onclick = function() {
        document.getElementById('welcome-modal').style.display = 'none';
    };
    // 复制合约地址
    document.getElementById('welcome-copy').onclick = function() {
        navigator.clipboard.writeText('soon');
        this.innerText = '✔';
        setTimeout(()=>{this.innerText='⧉';}, 1200);
    };
    // $CSKOL按钮跳转
    document.getElementById('welcome-cskol').onclick = function() {
        window.open('https://four.meme/zh-TW', '_blank');
    };
    // 如何使用按钮
    document.getElementById('welcome-help').onclick = function() {
        document.getElementById('howto-modal').style.display = 'flex';
    };
    // 如何使用弹窗关闭
    document.getElementById('howto-close').onclick = function() {
        document.getElementById('howto-modal').style.display = 'none';
    };
    // 所有"如何使用？"按钮弹出该弹窗
    document.querySelectorAll('button').forEach(btn => {
        if(btn.innerText && btn.innerText.replace(/\s/g,'') === '如何使用？'){
            btn.onclick = function(){ document.getElementById('howto-modal').style.display = 'flex'; };
        }
    });
    // Listen for Download Token Logo button click to download the current avatar
    document.querySelectorAll('button').forEach(btn => {
        if(btn.innerText && btn.innerText.replace(/\s/g,'') === 'DownloadTokenLogo(optional)'){
            btn.onclick = function() {
                var img = document.querySelector('#token-img img');
                if(img && img.src) {
                    var a = document.createElement('a');
                    a.href = img.src;
                    a.download = 'token-logo.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                } else {
                    alert('No available avatar image');
                }
            }
        }
    });
    // 新增卡片弹窗逻辑
    document.getElementById('add-card-btn').onclick = function() {
        document.getElementById('add-card-modal').style.display = 'flex';
    };
    document.getElementById('add-card-close').onclick = function() {
        document.getElementById('add-card-modal').style.display = 'none';
        document.getElementById('add-card-form').style.display = '';
        document.getElementById('add-card-wait').style.display = 'none';
    };
    // 只绑定一次onsubmit
    document.getElementById('add-card-form').onsubmit = null;
    document.getElementById('add-card-form').onsubmit = async function(e) {
        e.preventDefault();
        const name = document.getElementById('add-name').value.trim() || '未命名';
        const desc = document.getElementById('add-desc').value.trim();
        const twitter = document.getElementById('add-twitter').value.trim();
        // 不再处理头像上传
        firebase.firestore().collection('user-cards').add({
            name,
            desc,
            twitter,
            imgUrl: '',
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        document.getElementById('add-card-modal').style.display = 'none';
        document.getElementById('add-card-form').reset();
        document.getElementById('add-card-form').style.display = '';
        document.getElementById('add-card-wait').style.display = 'none';
    };
    // 点击遮罩关闭弹窗
    document.getElementById('add-card-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            document.getElementById('add-card-modal').style.display = 'none';
            document.getElementById('add-card-form').style.display = '';
            document.getElementById('add-card-wait').style.display = 'none';
        }
    });
    const firebaseConfig = {
        apiKey: "AIzaSyA5Z5ieEbAcfQX0kxGSn9ldGXhzvAwx_8M",
        authDomain: "chat-294cc.firebaseapp.com",
        databaseURL: "https://chat-294cc-default-rtdb.firebaseio.com",
        projectId: "chat-294cc",
        storageBucket: "chat-294cc.appspot.com",
        messagingSenderId: "913615304269",
        appId: "1:913615304269:web:0274ffaccb8e6b678e4e04",
        measurementId: "G-SJR9NDW86B"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    // 匿名登录
    firebase.auth().signInAnonymously().catch(console.error);
    // 聊天消息同步
    const chatMessages = document.getElementById('chat-messages');
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');
    const chatSendBtn = document.getElementById('chat-send-btn');
    function addMessage(msg, self) {
        const div = document.createElement('div');
        div.textContent = msg.text;
        div.style.margin = '4px 0';
        div.style.textAlign = self ? 'right' : 'left';
        div.style.opacity = self ? '1' : '0.8';
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    let myUid = null;
    firebase.auth().onAuthStateChanged(user => {
        if (user) {
            myUid = user.uid;
            db.collection('chat-messages').orderBy('timestamp').limitToLast(50)
                .onSnapshot(snapshot => {
                    chatMessages.innerHTML = '';
                    snapshot.forEach(doc => {
                        const msg = doc.data();
                        addMessage(msg, msg.uid === myUid);
                    });
                });
        }
    });
    function sendChat() {
        const text = chatInput.value.trim();
        if (!text) return;
        db.collection('chat-messages').add({
            text,
            uid: myUid,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        chatInput.value = '';
    }
    chatSendBtn.addEventListener('click', sendChat);
    chatInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            sendChat();
        }
    });
    // 审核查询弹窗逻辑
    const reviewBtn = document.getElementById('review-btn');
    const reviewModal = document.getElementById('review-modal');
    const reviewClose = document.getElementById('review-close');
    const reviewList = document.getElementById('review-list');
    reviewBtn.onclick = function() {
        reviewModal.style.display = 'flex';
    };
    reviewClose.onclick = function() {
        reviewModal.style.display = 'none';
    };
    reviewModal.addEventListener('click', function(e) {
        if (e.target === this) reviewModal.style.display = 'none';
    });
    // Firestore卡片集合监听
    const cardsRef = firebase.firestore().collection('user-cards');
    function renderReviewCards(cards) {
        reviewList.innerHTML = '';
        cards.forEach(card => {
            const data = card.data();
            const div = document.createElement('div');
            div.className = 'review-card';
            div.innerHTML = `
                <div class="review-card-info">
                    <div class="review-card-title">${data.name || '未命名'}</div>
                    <div class="review-card-desc">${data.desc || ''}</div>
                    ${data.twitter ? `<a class="review-card-twitter" href="${data.twitter}" target="_blank">${data.twitter}</a>` : ''}
                </div>
            `;
            reviewList.appendChild(div);
        });
    }
    cardsRef.orderBy('timestamp', 'desc').onSnapshot(snapshot => {
        renderReviewCards(snapshot.docs);
    });
    // 新增卡片时存储到user-cards集合（需在新增卡片表单提交处补充上传逻辑）
    // 例如：
    // cardsRef.add({name, desc, twitter, imgUrl, timestamp: firebase.firestore.FieldValue.serverTimestamp()});
    async function updateMainCardMarket() {
      const ca = '0x1f8aef369ef5b4f95b4a299417dce5ec55474444';
      try {
        const res = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${ca}`);
        const data = await res.json();
        if (data && data.pairs && data.pairs[0]) {
          const fdv = data.pairs[0].fdv;
          if (fdv) {
            document.getElementById('main-market').innerText = `市值：$${(fdv/1000).toFixed(1)}K`;
            document.getElementById('main-bar').style.width = '100%';
          }
        }
      } catch (e) {
        document.getElementById('main-market').innerText = '市值：--';
      }
    }
    updateMainCardMarket();
    setInterval(updateMainCardMarket, 10000);
    </script>
</body>
</html>
